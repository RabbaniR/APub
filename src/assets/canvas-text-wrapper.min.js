/*! canvas-text-wrapper
 *  https://github.com/namniak/canvas-text-wrapper
 *  Version:  0.5.1
 *  MIT License (http://www.opensource.org/licenses/mit-license.html)
 */
!function(a){function b(a,b,c){"use strict";function d(a){t||(t=q.sizeToFill?s.font.split(/\b\d+px\b/i):q.font.split(/\b\d+px\b/i)),s.font=t[0]+a+"px"+t[1]}function e(){isNaN(q.lineHeight)?-1!==q.lineHeight.toString().indexOf("px")?D=parseInt(q.lineHeight):-1!==q.lineHeight.toString().indexOf("%")&&(D=parseInt(q.lineHeight)/100*y):D=y*q.lineHeight}function f(){if(q.sizeToFill){var a=b.trim().split(/\s+/).length,c=0;do g(++c);while(x>z&&A.join(" ").split(/\s+/).length==a);g(--c)}else h();q.justifyLines&&"auto"===q.lineBreak&&k(),n(),l()}function g(a){d(a),D=a,h()}function h(){if(q.allowNewLine)for(var a=b.trim().split("\n"),c=0,d=0;c<a.length-1;c++)d+=a[c].trim().split(/\s+/).length,B.push(d);var e=b.trim().split(/\s+/);i(e),j(e),z=A.length*D}function i(a){var b,c,d,e;a.forEach(function(f,g){if(b="",c=s.measureText(f).width,c>w){for(var h=0;s.measureText(b+f[h]).width<=w&&h<f.length;h++)b+=f[h];d=f.slice(0,h),e=f.slice(h),a.splice(g,1,d,e)}})}function j(a){for(var b=0,c=0;b<a.length;c++)if(A[c]="","auto"===q.lineBreak){for(;s.measureText(A[c]+a[b]).width<=w&&b<a.length;)if(A[c]+=a[b]+" ",b++,q.allowNewLine)for(var d=0;d<B.length;d++)if(B[d]===b){c++,A[c]="";break}A[c]=A[c].trim()}else A[c]=a[b],b++}function k(){for(var a,b,c,d=0;d<A.length;d++)c=s.measureText(A[d]).width,(!a||c>a)&&(a=c,b=d);var e,f,g,h,i,j="â€Š";for(d=0;d<A.length;d++)if(d!==b&&(e=A[d].trim().split(/\s+/).length,!(1>=e))){A[d]=A[d].trim().split(/\s+/).join(j),f=s.measureText(j).width,g=(a-s.measureText(A[d]).width)/f,h=g/(e-1),i="";for(var k=0;h>k;k++)i+=j;A[d]=A[d].trim().split(j).join(i)}}function l(){for(var a=0;a<A.length;a++)m(A[a]),C.y=parseInt(C.y)+D,s.fillText(A[a],C.x,C.y),q.strokeText&&s.strokeText(A[a],C.x,C.y)}function m(a){"center"==q.textAlign?C.x=(u-s.measureText(a).width)/2:"right"==q.textAlign?C.x=u-s.measureText(a).width-q.paddingX:C.x=q.paddingX}function n(){"middle"==q.verticalAlign?C.y=(v-z)/2:"bottom"==q.verticalAlign?C.y=v-z-q.paddingY:C.y=q.paddingY}function o(){if(!(a instanceof HTMLCanvasElement))throw new TypeError("The first parameter must be an instance of HTMLCanvasElement.");if("string"!=typeof b)throw new TypeError("The second parameter must be a String.");if(isNaN(y))throw new TypeError('Cannot parse "font".');if(isNaN(D))throw new TypeError('Cannot parse "lineHeight".');if("left"!==q.textAlign.toLocaleLowerCase()&&"center"!==q.textAlign.toLocaleLowerCase()&&"right"!==q.textAlign.toLocaleLowerCase())throw new TypeError('Property "textAlign" must be set to either "left", "center", or "right".');if("top"!==q.verticalAlign.toLocaleLowerCase()&&"middle"!==q.verticalAlign.toLocaleLowerCase()&&"bottom"!==q.verticalAlign.toLocaleLowerCase())throw new TypeError('Property "verticalAlign" must be set to either "top", "middle", or "bottom".');if("boolean"!=typeof q.justifyLines)throw new TypeError('Property "justifyLines" must be a Boolean.');if(isNaN(q.paddingX))throw new TypeError('Property "paddingX" must be a Number.');if(isNaN(q.paddingY))throw new TypeError('Property "paddingY" must be a Number.');if("boolean"!=typeof q.fitParent)throw new TypeError('Property "fitParent" must be a Boolean.');if("auto"!==q.lineBreak.toLocaleLowerCase()&&"word"!==q.lineBreak.toLocaleLowerCase())throw new TypeError('Property "lineBreak" must be set to either "auto" or "word".');if("boolean"!=typeof q.sizeToFill)throw new TypeError('Property "sizeToFill" must be a Boolean.');if("boolean"!=typeof q.strokeText)throw new TypeError('Property "strokeText" must be a Boolean.')}var p={font:"18px Arial, sans-serif",sizeToFill:!1,lineHeight:1,allowNewLine:!0,lineBreak:"auto",textAlign:"left",verticalAlign:"top",justifyLines:!1,paddingX:0,paddingY:0,fitParent:!1,strokeText:!1},q={};for(var r in p)p.hasOwnProperty(r)&&(q[r]=c&&c[r]?c[r]:p[r]);var s=a.getContext("2d");s.font=q.font,s.textBaseline="bottom";var t,u=q.fitParent===!1?a.width:a.parentNode.clientWidth,v=q.fitParent===!1?a.height:a.parentNode.clientHeight,w=u-2*q.paddingX,x=v-2*q.paddingY,y=q.font.match(/\d+(px|em|%)/g)?+q.font.match(/\d+(px|em|%)/g)[0].match(/\d+/g):18,z=0,A=[],B=[],C={x:0,y:0},D=0;d(y),e(),o(),f()}"module"in a&&"exports"in module?module.exports=b:a.CanvasTextWrapper=b}(this);